@import "tailwindcss/preflight";
@config "../../tailwind.config.js";
@reference "tailwindcss";
@tailwind utilities;

/* 科技感深色主题与霓虹动效 */
@layer base {
  html {
    font-family: 'Inter', system-ui, sans-serif;
  }
  body {
    /* 默认深色主题 */
    background-color: #181f2a;
    color: #e5e7eb;
    /* 动态渐变背景层 */
    background-image: radial-gradient(800px 400px at 20% 10%, rgba(34, 211, 238, 0.15), transparent 60%),
                      radial-gradient(600px 300px at 80% 20%, rgba(96, 165, 250, 0.12), transparent 60%),
                      radial-gradient(700px 350px at 30% 80%, rgba(167, 139, 250, 0.12), transparent 60%);
    background-attachment: fixed;
  }
}

@layer components {
  /* 玻璃拟态卡片 */
  .card {
    background-color: rgba(40, 60, 90, 0.18);
    border-color: rgba(255, 255, 255, 0.10);
    box-shadow: 0 4px 24px 0 rgba(40, 60, 90, 0.12);
    @apply backdrop-blur-xl rounded-2xl border;
  }
  .card-hover {
    @apply cursor-pointer transition-all duration-300;
  }
  .card-hover:hover {
    transform: scale(1.02);
    border-color: rgba(255, 255, 255, 0.20);
    box-shadow: 0 8px 32px 0 rgba(40, 60, 90, 0.18);
  }
  @apply shadow-neon-strong;
  }

  /* 主要按钮 - 霓虹发光 */
  .btn-primary {
    background-color: #22d3ee;
    @apply text-black font-semibold px-4 py-2 rounded-xl shadow-neon transition-all duration-200;
  }
  .btn-primary:hover { @apply brightness-110 shadow-neon-strong; }

  /* 次要按钮 - 玻璃拟态 */
  .btn-secondary {
    background-color: rgba(255, 255, 255, 0.10);
    color: #ffffff;
    border-color: rgba(255, 255, 255, 0.20);
    @apply border font-medium px-4 py-2 rounded-xl transition-all duration-200;
  }
  .btn-secondary:hover { 
    background-color: rgba(255, 255, 255, 0.15);
    border-color: rgba(255, 255, 255, 0.30);
  }

  /* 导航头部玻璃条 */
  .glass-header {
    background-color: rgba(0, 0, 0, 0.30);
    border-color: rgba(255, 255, 255, 0.10);
    @apply backdrop-blur-xl border-b sticky top-0 z-50;
  }

  /* 页面过渡动画 */
  .page-enter-active, .page-leave-active { 
    @apply duration-500; 
  }
  .page-enter-from { 
    transform: translateY(12px) scale(0.98); 
    opacity: 0;
    filter: saturate(0.8) blur(2px);
  }
  .page-enter-to, .page-leave-from {
    transform: translateY(0) scale(1);
    opacity: 1;
    filter: saturate(1) blur(0);
  }
  .page-leave-to {
    transform: translateY(-8px) scale(0.995);
    opacity: 0;
    filter: saturate(0.9) blur(2px);
  }

/* 全局叠层：网格与扫描线 */
.grid-overlay {
  position: fixed;
  inset: 0;
  pointer-events: none;
  background-image:
    linear-gradient(rgba(255,255,255,0.04) 1px, transparent 1px),
    linear-gradient(90deg, rgba(255,255,255,0.04) 1px, transparent 1px);
  background-size: 60px 60px, 60px 60px;
  mask-image: radial-gradient(600px 300px at 50% 20%, black, transparent 70%);
  z-index: 0;
}

.scanlines {
  position: fixed;
  inset: 0;
  pointer-events: none;
  background: repeating-linear-gradient(
    to bottom,
    rgba(255,255,255,0.03) 0px,
    rgba(255,255,255,0.00) 2px,
    rgba(255,255,255,0.02) 4px
  );
  mix-blend-mode: overlay;
  z-index: 0;
}

/* PWA 安装提示样式（科技风） */
.pwa-install-prompt {
  background-color: rgba(0,0,0,0.50);
  color: #ffffff;
  @apply fixed bottom-4 left-4 right-4 p-4 rounded-xl shadow-neon backdrop-blur-xl z-50;
}
.pwa-install-prompt.hidden { transform: translateY(100%); }

/* 追加：骨架屏与轮播3D、指示器 */
@layer components {
  /* 骨架屏闪光效果 */
  @keyframes shimmer {
    0% { background-position: -200% 0; }
    100% { background-position: 200% 0; }
  }
  .skeleton-shimmer {
    background: linear-gradient(90deg, rgba(255,255,255,0.05) 25%, rgba(255,255,255,0.12) 50%, rgba(255,255,255,0.05) 75%);
    background-size: 200% 100%;
    animation: shimmer 1.8s infinite;
  }
  .skeleton-card { 
    background-color: rgba(255, 255, 255, 0.05);
    border-color: rgba(255, 255, 255, 0.10);
    @apply backdrop-blur-xl rounded-2xl border shadow-neon; 
  }
  .skeleton-thumb { @apply rounded-xl; height: 9rem; }
  .skeleton-line { @apply rounded-md; height: 0.75rem; }

  /* 轮播3D翻转 */
  .carousel-3d { perspective: 1000px; }
  .carousel-3d .frame { transform-style: preserve-3d; transition: transform 500ms ease, filter 300ms ease; }
  .carousel-3d .frame.flip-left { transform: rotateY(-12deg); filter: brightness(0.95) saturate(0.9); }
  .carousel-3d .frame.flip-right { transform: rotateY(12deg); filter: brightness(0.95) saturate(0.9); }

  /* 霓虹指示器 */
  .indicators { display: flex; gap: 8px; justify-content: center; margin-top: 0.75rem; }
  .indicators .dot { width: 8px; height: 8px; border-radius: 9999px; background-color: rgba(255,255,255,0.35); box-shadow: 0 0 6px rgba(167,139,250,.6); transition: all .2s ease; }
  .indicators .dot.active { background-color: #22d3ee; box-shadow: 0 0 10px rgba(34,211,238,.8); transform: scale(1.2); }
}

/* 为底部导航留出空间 */
main {
  padding-bottom: env(safe-area-inset-bottom, 0);
}

@media (max-width: 640px) {
  main {
    padding-bottom: calc(4rem + env(safe-area-inset-bottom, 0));
  }
}